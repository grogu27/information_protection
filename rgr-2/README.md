# Расчётно-графическая работа
## Тема: Доказательство с нулевым знанием (Гамильтонов цикл)

---

# Содержание
1. Постановка задачи
2. Теоретическая часть
3. Структура проекта
4. Описание файлов
5. Сборка и запуск
6. Пример работы программы

---

# 1. Постановка задачи
Необходимо реализовать протокол доказательства с нулевым знанием (ZKP) для задачи "Гамильтонов цикл".

Особенности задачи:
- Гамильтонов цикл предоставляется во входном файле.
- Программа не ищет цикл, а проверяет его с помощью протокола.
- Протокол демонстрирует доказательство без раскрытия информации о цикле.
- Для тестирования необходимо генерировать граф с корректным циклом с помощью дополнительной программы.

---

# 2. Теоретическая часть

## 2.1 Что такое ZKP

Протокол доказательства с нулевым знанием (Zero-Knowledge Proof, ZKP) позволяет одному участнику (Prover) доказать другому участнику (Verifier), что он владеет знанием некоторого секрета (например, гамильтонова цикла), **не раскрывая сам секрет**.  

Преимущества:
- Verifier убеждается в существовании решения.
- Prover не раскрывает сам цикл.
- Сложность проверки мала, а вероятность ошибки контролируется числом раундов.

---

## 2.2 Как работает протокол для Гамильтонова цикла

### Шаг 1. Подготовка

- Prover имеет граф G с n вершинами и гамильтонов цикл C.
- Генерируется случайная перестановка вершин графа (изоморфизм) для скрытия цикла.

### Шаг 2. Коммит

- Prover "коммитит" переставленный граф, скрывая реальный цикл.
- На этом этапе Verifier не знает, где находится цикл, и не может получить информацию о нем.

### Шаг 3. Challenge

- Verifier случайно выбирает challenge = 0 или 1:
  - **0** → проверка, что предоставленный граф изоморфен исходному.  
  - **1** → проверка наличия гамильтонова цикла в переставленном графе.

### Шаг 4. Ответ Prover

- В зависимости от challenge Prover раскрывает соответствующую информацию:
  - Для challenge 0 → показывает перестановку вершин.  
  - Для challenge 1 → показывает переставленный гамильтонов цикл.

### Шаг 5. Проверка Verifier

- Verifier проверяет, что:
  - Challenge 0 → граф действительно изоморфен исходному.  
  - Challenge 1 → предоставленный цикл действительно гамильтонов.  
- Если проверка проходит → раунд засчитан как OK.  

### Шаг 6. Повторение

- Протокол повторяется R раундов (чем больше R, тем выше вероятность, что Prover не обманывает).
- После всех раундов Verifier убеждается, что Prover действительно знает гамильтонов цикл, **не зная самого цикла**.

---

## 2.3 Зачем это нужно

- Применяется в криптографии и системах аутентификации.  
- Позволяет доказать владение секретом без его раскрытия.  
- В учебной задаче демонстрирует работу ZKP на примере NP-полной задачи "Гамильтонов цикл".

---

# 3. Структура проекта

Проект состоит из следующих элементов:

.
├── build
│   ├── graph.o       # объектный файл для graph.cpp
│   ├── main.o        # объектный файл для main.cpp
│   └── zkp.o         # объектный файл для zkp.cpp
├── cycle.txt         # сгенерированный гамильтонов цикл (генератор)
├── gen               # бинарник генератора графа
├── graph.txt         # сгенерированный граф (генератор)
├── Makefile          # сборка проекта, генератора, запуск
├── README.txt        # описание проекта (текущий файл)
├── setup.sh          # скрипт создания структуры и исходников
├── src               # исходники проекта
│   ├── gen.cpp       # генератор графа с гамильтоновым циклом
│   ├── graph.cpp     # реализация функций работы с графом
│   ├── graph.hpp     # заголовок для graph.cpp
│   ├── main.cpp      # точка входа, запуск ZKP
│   ├── zkp.cpp       # реализация протокола доказательства с нулевым знанием
│   └── zkp.hpp       # заголовок для zkp.cpp
└── zkp               # бинарник протокола ZKP

---

# 4. Описание файлов

## main.cpp
- Загружает граф и цикл из файлов.
- Запускает протокол ZKP.

## graph.hpp / graph.cpp
- Считывают граф и цикл из файлов.
- Проверка корректности гамильтонова цикла.

## zkp.hpp / zkp.cpp
- Реализация протокола доказательства с нулевым знанием:
    - Случайная перестановка вершин.
    - Коммит графа.
    - Challenge 0: проверка изоморфизма.
    - Challenge 1: проверка цикла.

## gen.cpp
- Генератор графа с гарантированным гамильтоновым циклом.

## Makefile
- Сборка бинарника `zkp`.
- Сборка генератора `gen`.
- Цель `run` — автоматическая генерация файлов и запуск протокола.
- Цель `clean` — очистка бинарников и объектных файлов.

## setup.sh
- Создаёт структуру проекта, все исходники и Makefile.

---

# 5. Сборка и запуск

## Сборка проекта
make

## Сборка генератора
make gen

## Генерация тестового графа
./gen N
где N — число вершин графа (3 ≤ N ≤ 1000).

## Запуск протокола ZKP
./zkp graph.txt cycle.txt R
где R — число раундов протокола.

## Удобный запуск одной командой
make run N=10 R=10
- Сначала соберёт `zkp` и `gen`.
- Сгенерирует файлы `graph.txt` и `cycle.txt`.
- Запустит ZKP на 10 раундах.

---

# 6. Пример работы программы

=== Round 1 ===
Verifier challenge = 1
OK

=== Round 2 ===
Verifier challenge = 0
OK

=== Round 3 ===
Verifier challenge = 0
OK

...

=== Round 10 ===
Verifier challenge = 1
OK

- Вывод показывает последовательные раунды протокола, случайный challenge и результат проверки.
- Все раунды пройдены → Prover успешно доказал знание гамильтонова цикла без его раскрытия.
